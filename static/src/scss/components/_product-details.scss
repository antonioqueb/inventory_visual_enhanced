.details-wrapper {
  padding: 16px;
  background: #FAFAFA;
  overflow-x: auto;
  
  // Scrollbar inline
  scrollbar-width: thin;
  scrollbar-color: #8F8F8F #FAFAFA;
}

.o_inventory_details_table {
  width: 100%;
  border-collapse: collapse;
  background: #FFFFFF;
  border: 1px solid #E0E0E0;
  border-radius: 8px;
  font-size: 12px;

  thead {
    background: #F5F5F5;
    border-bottom: 2px solid #CCCCCC;

    th {
      padding: 8px 12px;
      text-align: left;
      font-weight: 700;
      color: #2C2C2C;
      font-size: 11px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      border-right: 1px solid #E0E0E0;
      white-space: nowrap;

      &:last-child { border-right: none; }
      &.col-icon { width: 40px; text-align: center; }
    }
  }

  tbody {
    tr {
      border-bottom: 1px solid #E0E0E0;
      transition: background-color 150ms cubic-bezier(0.4, 0, 0.2, 1);
      &:hover { background: #FAFAFA; }
      &:last-child { border-bottom: none; }
    }

    td {
      padding: 8px 12px;
      vertical-align: middle;
      color: #2C2C2C;
      border-right: 1px solid #E0E0E0;
      &:last-child { border-right: none; }
      &.col-icon { text-align: center; padding: 4px; }
      .text-muted { color: #808080; }
    }
  }

  .col-lot, .col-bloque, .col-atado {
    font-family: "SF Mono", Monaco, Consolas, "Courier New", monospace;
    font-weight: 600;
    white-space: nowrap;
  }

  .col-location {
    font-weight: 500;
    .fa-map-marker { color: #714B67; margin-right: 4px; }
  }

  .col-dimensions {
    .dimensions-inline {
      display: inline-flex; align-items: center; gap: 8px;
      white-space: nowrap; font-size: 11px; color: #7a7a7a;
    }
    .dimensions-total-inline {
      font-weight: 700; color: #714B67;
      font-family: sans-serif; font-size: 13px; margin-left: 4px;
    }
  }
}

.table-loading {
  padding: 24px; text-align: center;
  .spinner {
    width: 32px; height: 32px; border: 3px solid #f0ebef;
    border-top-color: #714B67; border-radius: 50%;
    animation: spin 1s linear infinite; margin: 0 auto 12px;
  }
  .loading-text { color: #7a7a7a; font-size: 12px; }
}

.col-tipo {
  font-family: $font-family-monospace; font-weight: 600; white-space: nowrap;
  .text-muted { color: $text-muted; }
}

// === RESPONSIVE DETAILS CARDS ===
@media (max-width: $breakpoint-md) {
    .details-wrapper {
        padding: $spacing-sm;
        background: transparent;
    }

    .o_inventory_details_table {
        border: none;
        background: transparent;

        thead { display: none; }

        tbody {
            display: flex;
            flex-direction: column;
            gap: $spacing-md;

            tr {
                display: flex;
                flex-wrap: wrap;
                background: #FFFFFF;
                border: 1px solid $border-color;
                border-radius: $border-radius-md;
                padding: $spacing-md;
                box-shadow: $shadow-sm;
                position: relative;
            }

            td {
                border: none !important;
                padding: 4px !important;
                display: flex;
                align-items: center;
                
                // Distribución de elementos en la "tarjeta" de detalle
                
                // Lote como título
                &.col-lot {
                    width: calc(100% - 40px); // Dejar espacio para checkbox
                    order: 1;
                    font-size: 14px;
                    color: $primary-color;
                    margin-bottom: 8px;
                    border-bottom: 1px solid #f0f0f0 !important;
                    padding-bottom: 8px !important;
                    
                    &:before { content: "Lote: "; color: $text-secondary; font-weight: normal; margin-right: 5px; font-family: sans-serif; }
                }

                // Checkbox arriba a la derecha
                &.col-checkbox {
                    width: 30px;
                    order: 0;
                    position: absolute;
                    top: 12px;
                    right: 12px;
                }

                // Datos principales
                &.col-location { width: 100%; order: 2; margin-bottom: 4px; }
                &.col-dimensions { width: 100%; order: 3; margin-bottom: 8px; background: #f9f9f9; padding: 6px !important; border-radius: 4px; }
                
                // Datos secundarios (ocultar si están vacíos o hacerlos pequeños)
                &.col-tipo, &.col-bloque, &.col-atado, &.col-pedimento, &.col-contenedor {
                    width: 50%;
                    order: 4;
                    font-size: 11px;
                    color: $text-secondary;
                    
                    span { color: $text-primary; }
                    
                    &:before {
                        content: attr(class);
                        text-transform: capitalize;
                        margin-right: 4px;
                        font-weight: 600;
                    }
                    // Limpieza de nombres de clases para el label
                    &.col-tipo:before { content: "Tipo:"; }
                    &.col-bloque:before { content: "Bloq:"; }
                    &.col-atado:before { content: "Atado:"; }
                    &.col-pedimento:before { content: "Ped:"; }
                    &.col-contenedor:before { content: "Cont:"; }
                }

                // Iconos de acción al final
                &.col-icon {
                    width: 25%; // 4 iconos = 100%
                    order: 10;
                    justify-content: center;
                    margin-top: 12px;
                    border-top: 1px solid #f0f0f0 !important;
                    padding-top: 8px !important;
                    
                    .icon-btn, .status-badge-btn {
                        width: 40px;
                        height: 40px;
                        font-size: 16px;
                    }
                }
                
                // Ocultar Ref Prov si está vacío para ahorrar espacio
                &.col-ref-proveedor { display: none; }
            }
        }
    }
}